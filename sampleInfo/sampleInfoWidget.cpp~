#include "sampleInfoWidget.h"
#include <sstream>
#include <qlayout.h>

using namespace std;

SampleInfoWidget::SampleInfoWidget(QWidget* parent, const char* name)
    : QWidget(parent, name)
{
    textView = new QTextView(this);
    QVBoxLayout* vbox = new QVBoxLayout(this);
    vbox->addWidget(textView);
}

void SampleInfoWidget::setInfo(exptInfo* eInfo){
    currentInfo = eInfo;
    ostringstream ts;
    
    ts << "<qt bgcolor=\"#ffff90\">";
    ts << "<table bgcolor=\"#0000f0\">";
    ts << "<tr><td width=20%>Short</td><td width=80%>" << eInfo.shortName << "</td></tr>";
    ts << "<tr><td width=20%>Description</td><td width=80%>" << eInfo.description << "</td></tr>";
    ts << "<tr><td width=20%>index</td><td width=80%>" << eInfo.index << "</td></tr>";
    ts << "<tr><td width=20%>db index</td><td width=80%>" << eInfo.dbaseIndex << "</td></tr>";
    ts << "</table>";

    int chipWidth = 10;
    ts << "<p><table  bgcolor=\"#0000f0\">";
    ts << "<tr>";
    for(map<int, bool>::iterator it=eInfo.begin(); it !=eInfo.end(); it++){
	ts << "<td width=" << chipWidth << ">" << *it.first << "</td>";
    }
    ts << "</tr><tr>"
    for(map<int, bool>::iterator it=eInfo.begin(); it !=eInfo.end(); it++){
	ts << "<td width=" << chipWidth << ">";
	if(*it.second){
	    ts << "O";
	}else{
	    ts << "X";
	}
	ts << "</td>";
    }
    ts << "</tr></table>";

    textView->setText(ts.str().c_str());
}
    
