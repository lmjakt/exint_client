#include "keyWindow.h"
#include <qwidget.h>
#include <qcolor.h>
#include <qstring.h>
#include <qpainter.h>
#include <qfont.h>
#include <vector>

using namespace std;

KeyWindow::KeyWindow(vector<QColor*> c, QWidget* parent, const char* name) :
  QWidget(parent, name)
{
  colours = c;
  penWidth = 3;
  /// and that is pretty much all I need to do..
}

void KeyWindow::paintEvent(QPaintEvent* e){
  paintKeys(); // just do everything there..
}

void KeyWindow::paintKeys(vector<QString> k){
  keys = k;
  paintKeys();
}

void KeyWindow::paintKeys(){
  erase();
  if(keys.size() < 1) {
    return;
  }
  int y;
  QPainter p(this);
  p.setFont(QFont("helvetica", 8));
  // just draw straight on the widget as this should be pretty fast..
  for(int i=0; i < keys.size(); i++){
    y = (20 + i*20);
    p.setPen(QPen(QColor(0, 0, 0), 0, PenStyle(SolidLine), PenCapStyle(SquareCap), PenJoinStyle(MiterJoin)));
    p.drawText(30, y, keys[i]);
    p.setPen(QPen(*colours[i % colours.size()], penWidth, PenStyle(SolidLine), PenCapStyle(SquareCap), PenJoinStyle(MiterJoin)));
    p.drawLine(5, y-4, 25, y-4);
  }
} 

void KeyWindow::setPenWidth(int n){
  penWidth = n;
  update();
}

void KeyWindow::clearAll(){
  keys.resize(0);
  erase();
}
    
    
