#include "protocolStepWidget.h"
#include <qlayout.h>

ProtocolStepWidget(QWidget* parent, const char* name)
  : QWidget(parent, name)
{
  textArea = new QTextEdit(this, "textArea");
  connect(textArea, SIGNAL(textChanged()), this, SLOT(textChanged()) );

  stepLabel = new QLabel("?", this, "stepLabel");
  
  QHBoxLayout* hbox = new QHBoxLayout(this);
  QVBoxLayout* leftBox = new QVBox();
  hbox->addLayout(leftBox);

  leftBox->addWidget(stepLabel);
  leftBox->addStretch();
  
  hbox->addWidget(textArea);
}

QSize ProtocolStepWidget::sizeHint() const
{
  int h = textArea->contentsHeight();
  int w = width();  // whatever we are..
  
  if(h < 20){ h = 20; }
  return(QSize(w, h));
}

void ProtocolStepWidget::textChanged(){
  if(textArea->contentsHeight() > height()){
    cout << "resizing the protocol thingy widget area " << endl;
    resize(width(), textArea->contentsHeight());
  }
}
